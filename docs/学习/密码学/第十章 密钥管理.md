# 密钥管理
## 密钥结构
层次化的密钥管理方式
![](https://gitee.com/guuest/images/raw/master/img/20210617210620.png)
## 秘钥分类
### 基本密钥
基本密钥（Base Key）：又称为**初始密钥**（primary key）或**用户密钥**（user key）。它是由用户选定或由系统分配给用户的，可以在较长时间内（相对于会话密钥）由一对用户（例如密钥分配中心与某一用户之间，或者两个用户之间）所专用的密钥。在某种程度上，基本密钥还起到了标识用户的作用。
### 会话密钥（数据加密秘钥）
在一次通信或数据交换中，用户之间所使用的密钥，是由通信用户之间进行协商得到的。它一般是动态地、仅在需要进行会话数据加密时产生，并在使用完毕后立即进行清除掉的，也称为**数据加密密钥**(Data Encrypting Key)。
### 密钥加密密钥
一般是用来对传输的会话密钥进行加密时采用的密钥，又称为**二级密钥**(Secondary Key)。密钥加密密钥所保护的对象是实际用来保护通信或文件数据的会话密钥。
### 主密钥
对应于层次化密钥结构中的最高层次，它是对密钥加密密钥进行加密的密钥，主密钥应受到严格的保护。
## 密钥分层管理
![](https://gitee.com/guuest/images/raw/master/img/20210617211558.png)
## D-H密钥协商
![](https://gitee.com/guuest/images/raw/master/img/20210617211928.png)
![](https://gitee.com/guuest/images/raw/master/img/20210617212252.png)
## 中间人攻击
![](https://gitee.com/guuest/images/raw/master/img/20210617212407.png)
## 密钥分配技术
密钥分配技术一般需要解决两个方面的问题：为减轻负担，提高效率，引入自动密钥分配机制；为提高安全性，尽可能减少系统中驻留的密钥量。
为了满足这两个问题，目前有两种类型的密钥分配方案：**集中式**和**分布式**密钥分配方案。
### 集中式密钥分配方案
集中式密钥分配方案是指由密钥分配中心（KDC）或者由一组节点组成层次结构负责密钥的产生并分配给通信双方。
### 分布式密钥分配方案
分布式密钥分配方案是指网络通信中各个通信方具有相同的地位，它们之间的密钥分配取决于它们之间的协商，不受何其他方的限制（更进一步，可以把密钥分配中心分散到所有的通信方，即每个通信方同时也是密钥分配中心）。
