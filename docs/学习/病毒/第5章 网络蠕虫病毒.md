# 网络蠕虫病毒
## 蠕虫病毒的基本特征
- 可以从一台计算机移动到另一台计算机
- 可以自我复制

## 蠕虫的特性
- 传播性
- 寄生性
- 不寄生于文件或引导扇区，一般以独立的文件或者多个文件存在于磁盘，以独立的进程运行于内存或者寄生在其他进程中

## 蠕虫攻击对象
- 针对企业用户和局域网（系统漏洞主动攻击）
- 个人用户（email）

## 蠕虫的特点
- 利用操作系统和应用程序的漏洞主动进行攻击
- 传播方式多样化
- 病毒制作技术与黑客技术相结合，潜在的威胁和损失更大

## 蠕虫的攻击手段
- 缓冲区溢出攻击-堆栈、堆
- 格式化字符串攻击
- 拒绝服务攻击
- 弱口令攻击
- 默认设置脆弱性攻击

## 蠕虫和病毒的区别
计算机病毒与蠕虫的一个重要区别是，病毒需要借助活动的宿主程序或已被感染的活动操作系统才能运行、造成破坏并感染其他可执行文件或文档；而蠕虫是独立的恶意程序，可以通过计算机网络进行自我复制和传播，不需要人工干预。

## 缓冲区溢出
 所谓缓冲区，简单来说就是程序运行时内存中的一块连续的区域。
例如C语言中经常要用到的数组，其中最常见的是字符数组。
如果向一个缓冲区复制数据，但是复制的数据量比缓冲区大的时候，就会发生缓冲区溢出。

### 缓冲区溢出漏洞产生的根源
冯诺依曼体系结构对代码和数据采用统一编址，没有严格区分二者。冯诺依曼体系结构规定：
缓冲区溢出就是不顾堆栈中分配的局部数据块大小，向该数据块写入了较多的数据，导致数据越界，结果覆盖了老的堆栈数据
（1）数字计算机的数制采用二进制，计算机应该按照程序顺序执行。
（2）计算机由控制器、运算器、存储器、输入设备、输出设备五大部件组成。
（3）程序和数据以二进制代码形式不加区别地存放在存储器中，存放位置由地址确定。
（4）控制器根据存放在存储器中的指令序列（程序）进行工作，并由一个程序计数器控制指令执行。控制器具有判断能力，能根据计算结果选择不同的工作流程。因此，在冯诺依曼体系下，无论程序计数器指向数据区还是代码区，都会将指向的内容当做代码执行。

### 缓冲区溢出产生条件
- 使用非类型安全的语言，如CIC++（不判断边界）。
- 以不安全的方式访问或复制缓冲区（不考虑大小）。
- 编译器将缓冲区放在内存中关键数据结构旁边或邻近的位置。（例如堆栈）

![](https://gitee.com/guuest/images/raw/master/img/20210616184315.png)

### 缓冲区溢出举例
![](https://gitee.com/guuest/images/raw/master/img/20210616185059.png)

## 蠕虫与溢出
![](https://gitee.com/guuest/images/raw/master/img/20210616185411.png)
![](https://gitee.com/guuest/images/raw/master/img/20210616185609.png)

## shellcode
Shellcode是指能完成特殊任务的自包含的二进制代码，根据不同的任务可能是发出一条系统调用或建立一个高权限的Shell，Shellcode因此得名。
最终目的：获取目标机器的控制权。

## shellcode特点
Shellcode一般是作为数据形式发送给服务器，制造溢出得以执行代码并获取控制权的
（1）长度受限
（2）不能使用特殊字符，例如\00、xff等
（3）具有重定位能力
（4）一定的兼容性

## 缓存区溢出漏洞避免方法
- 检查容易出错的函数
- 数组边界检查，要求代码传递缓冲区的长度
- 程序指针完整性检查